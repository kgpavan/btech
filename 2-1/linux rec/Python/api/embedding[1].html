<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>1.4 Embedding Python </title>
<META NAME="description" CONTENT="1.4 Embedding Python ">
<META NAME="keywords" CONTENT="api">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link rel="STYLESHEET" href="api.css">
<LINK REL="previous" href="exceptions.html">
<LINK REL="up" href="intro.html">
<LINK REL="next" href="veryhigh.html">
</head>
<body bgcolor="#ffffff">
<div class='navigation'>
<table align='center' width='100%' cellpadding='0' cellspacing='2'>
<tr>
<td><A href="veryhigh.html"><img width=32 height=32 align=bottom border=0 alt="next"
 src="../icons/next.gif"></A></td>
<td><A href="intro.html"><img width=32 height=32 align=bottom border=0 alt="up"
 src="../icons/up.gif"></A></td>
<td><A href="exceptions.html"><img width=32 height=32 align=bottom border=0 alt="previous"
 src="../icons/previous.gif"></A></td>
<td align='center' bgcolor='#99CCFF' width='100%'>
 <b class=title>Python/C API Reference Manual</b></td>
<td><A href="contents.html"><img width=32 height=32 align=bottom border=0 alt="contents"
 src="../icons/contents.gif"></A></td>
<td><img width=32 height=32 align=bottom border=0 alt=""
 src="../icons/blank.gif"></td>
<td><A href="genindex.html"><img width=32 height=32 align=bottom border=0 alt="index"
 src="../icons/index.gif"></A></td>
</tr></table><b class='navlabel'>Next:</b> <span class='sectref'><A href="veryhigh.html">2. The Very High</A></span>
<b class='navlabel'>Up:</b> <span class='sectref'><A href="intro.html">1. Introduction</A></span>
<b class='navlabel'>Previous:</b> <span class='sectref'><A href="exceptions.html">1.3 Exceptions</A></span>
<br><hr></div>
<!--End of Navigation Panel-->

<H1><A NAME="SECTION003400000000000000000"></A>
<BR>
1.4 Embedding Python 
</H1>

<P>
The one important task that only embedders (as opposed to extension
writers) of the Python interpreter have to worry about is the
initialization, and possibly the finalization, of the Python
interpreter.  Most functionality of the interpreter can only be used
after the interpreter has been initialized.

<P>
The basic initialization function is
<tt class="cfunction">Py_Initialize()</tt><a name='l2h-34'></a>.
This initializes the table of loaded modules, and creates the
fundamental modules <tt class="module">__builtin__</tt><a name='l2h-35'></a>,
<tt class="module">__main__</tt><a name='l2h-36'></a> and 
<tt class="module">sys</tt><a name='l2h-37'></a>.  It also initializes the module
search path (<code>sys.path</code>).<a name='l2h-38'></a>
<a name='l2h-33'></a>
<P>
<tt class="cfunction">Py_Initialize()</tt> does not set the ``script argument list'' 
(<code>sys.argv</code>).  If this variable is needed by Python code that 
will be executed later, it must be set explicitly with a call to 
<code>PySys_SetArgv(<var>argc</var>,
<var>argv</var>)</code><a name='l2h-39'></a> subsequent to the call to
<tt class="cfunction">Py_Initialize()</tt>.

<P>
On most systems (in particular, on Unix and Windows, although the
details are slightly different),
<tt class="cfunction">Py_Initialize()</tt> calculates the module search path based
upon its best guess for the location of the standard Python
interpreter executable, assuming that the Python library is found in a
fixed location relative to the Python interpreter executable.  In
particular, it looks for a directory named
<font class="file" face="sans-serif">lib/python1.5</font> (replacing <font class="file" face="sans-serif">1.5</font> with the current
interpreter version) relative to the parent directory where the
executable named <font class="file" face="sans-serif">python</font> is found on the shell command search
path (the environment variable <span class='envvar'><a name='l2h-40'>$PATH</a></span>).

<P>
For instance, if the Python executable is found in
<font class="file" face="sans-serif">/usr/local/bin/python</font>, it will assume that the libraries are in
<font class="file" face="sans-serif">/usr/local/lib/python1.5</font>.  (In fact, this particular path
is also the ``fallback'' location, used when no executable file named
<font class="file" face="sans-serif">python</font> is found along <span class='envvar'><a name='l2h-41'>$PATH</a></span>.)  The user can override
this behavior by setting the environment variable <span class='envvar'><a name='l2h-42'>$PYTHONHOME</a></span>,
or insert additional directories in front of the standard path by
setting <span class='envvar'><a name='l2h-43'>$PYTHONPATH</a></span>.

<P>
The embedding application can steer the search by calling 
<code>Py_SetProgramName(<var>file</var>)</code><a name='l2h-44'></a> <i>before</i> calling 
<tt class="cfunction">Py_Initialize()</tt>.  Note that <span class='envvar'><a name='l2h-45'>$PYTHONHOME</a></span> still
overrides this and <span class='envvar'><a name='l2h-46'>$PYTHONPATH</a></span> is still inserted in front of
the standard path.  An application that requires total control has to
provide its own implementation of
<tt class="cfunction">Py_GetPath()</tt><a name='l2h-47'></a>,
<tt class="cfunction">Py_GetPrefix()</tt><a name='l2h-48'></a>,
<tt class="cfunction">Py_GetExecPrefix()</tt><a name='l2h-49'></a>, and
<tt class="cfunction">Py_GetProgramFullPath()</tt><a name='l2h-50'></a> (all
defined in <font class="file" face="sans-serif">Modules/getpath.c</font>).

<P>
Sometimes, it is desirable to ``uninitialize'' Python.  For instance, 
the application may want to start over (make another call to 
<tt class="cfunction">Py_Initialize()</tt>) or the application is simply done with its 
use of Python and wants to free all memory allocated by Python.  This
can be accomplished by calling <tt class="cfunction">Py_Finalize()</tt>.  The function
<tt class="cfunction">Py_IsInitialized()</tt><a name='l2h-51'></a> returns
true if Python is currently in the initialized state.  More
information about these functions is given in a later chapter.

<P>
<p>
<div class='navigation'><hr><table align='center' width='100%' cellpadding='0' cellspacing='2'>
<tr>
<td><A href="veryhigh.html"><img width=32 height=32 align=bottom border=0 alt="next"
 src="../icons/next.gif"></A></td>
<td><A href="intro.html"><img width=32 height=32 align=bottom border=0 alt="up"
 src="../icons/up.gif"></A></td>
<td><A href="exceptions.html"><img width=32 height=32 align=bottom border=0 alt="previous"
 src="../icons/previous.gif"></A></td>
<td align='center' bgcolor='#99CCFF' width='100%'>
 <b class=title>Python/C API Reference Manual</b></td>
<td><A href="contents.html"><img width=32 height=32 align=bottom border=0 alt="contents"
 src="../icons/contents.gif"></A></td>
<td><img width=32 height=32 align=bottom border=0 alt=""
 src="../icons/blank.gif"></td>
<td><A href="genindex.html"><img width=32 height=32 align=bottom border=0 alt="index"
 src="../icons/index.gif"></A></td>
</tr></table><b class='navlabel'>Next:</b> <span class='sectref'><A href="veryhigh.html">2. The Very High</A></span>
<b class='navlabel'>Up:</b> <span class='sectref'><A href="intro.html">1. Introduction</A></span>
<b class='navlabel'>Previous:</b> <span class='sectref'><A href="exceptions.html">1.3 Exceptions</A></span>
</div>
<!--End of Navigation Panel-->
<ADDRESS>
<hr>Send comments on this document to <a href="mailto:python-docs@python.org">python-docs@python.org</a>.
</ADDRESS>
</BODY>
</HTML>
